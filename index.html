<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elden Ring Nightreign: 맵시드 찾기 </title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="description" content="Interactive tool to identify Elden Ring Nightreign map seeds based on point-of-interest locations">
    <meta name="keywords" content="Elden Ring, Nightreign, map, seed, recogniser, POI, gaming, tool">
    <link rel="icon" href="favicon.ico">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="title">
                <i class="fas fa-map"></i>
                Elden Ring Nightreign: 맵 시드 찾기
            </h1>
            <div class="subtitle">
                <p class="version">Version 1.1</p> 
                <span id="cv-status" style="font-size: 11px; color: #6c757d; margin-left: 15px;"></span>
            </div>
        </header>

        <main class="main-content">

            <div id="loading-section" class="section" style="display: block;">
                <div class="loading-indicator">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Initializing map data, please wait...</p>
                </div>
            </div>

            <div id="selection-section" class="section" style="display: none;">
                <div class="selection-grid">
                    <div class="selection-card">
                        <h3>보스를 골라보자</h3>
                        <p class="current-selection">현재 선택: <span id="chosen-nightlord">없음</span></p>
                        <div class="button-grid"> 
                            <button class="nightlord-btn" data-nightlord="Gladius">세멍뭉이</button>
                            <button class="nightlord-btn" data-nightlord="Adel">턱</button>
                            <button class="nightlord-btn" data-nightlord="Gnoster">벌레</button>
                            <button class="nightlord-btn" data-nightlord="Maris">마리스핵노잼</button>
                            <button class="nightlord-btn" data-nightlord="Libra">리브라</button>
                            <button class="nightlord-btn" data-nightlord="Fulghor">풀고르</button>
                            <button class="nightlord-btn" data-nightlord="Caligo">칼리고</button>
                            <button class="nightlord-btn" data-nightlord="Heolstor">밤본자</button>
                        </div>
                        <div class="unknown-nightlord-container">
                            <button class="nightlord-btn" data-nightlord="Unknown">아몰랑</button>
                        </div>
                    </div>

                    <div class="selection-card">
                        <h3>지변을 골라보자 </h3>
                        <p class="current-selection">현재 선택: <span id="chosen-map">없음</span></p>
                        <div class="button-grid">
                            <button class="map-btn" data-map="Default">기본맵</button>
                            <button class="map-btn" data-map="Mountaintop">설산</button>
                            <button class="map-btn" data-map="Crater">화구</button>
                            <button class="map-btn" data-map="Rotted Woods">부패숲</button>
                            <button class="map-btn" data-map="Noklateo">노크라테오</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="interaction-section" class="section" style="display: none;">
                <div class="instructions-card">
                    <h3><i class="fas fa-info-circle"></i> 사용 방법</h3>
                    <div class="instruction-grid">
                        <div class="instruction-item">
                            <i class="fas fa-mouse-pointer"></i>
                            <span><strong>왼클릭으로</strong> 오렌지 점에 성배교회를 고르고 </span>
                        </div>
                        <div class="instruction-item">
                            <i class="fas fa-hand-pointer"></i>
                            <span><strong>오른 클릭으로</strong> 마탑 혹은 상인마을을 골라라</span>
                        </div>
                    </div>
                    <div class="button-row">
                        <button id="reset-map-btn" class="reset-btn">
                            <i class="fas fa-undo"></i>
                            맵 리셋 / 마커 리셋
                        </button>
                        
                        <button id="help-btn" class="help-btn">
                            <i class="fas fa-question-circle"></i>
                            사용 방법 및 팁
                        </button>
                    </div>
                </div>
            </div>

            <div id="results-section" class="section" style="display: none;">
                <div class="results-grid">
                    <div class="left-panel">
                        <div class="seed-counter">
                            <h3>가능한 시드 수</h3>
                            <div class="seed-count" id="seed-count">0</div>
                        </div>

                        <div id="possible-seeds-section" class="possible-seeds-section" style="display: none;">
                            <div class="possible-seeds-card">
                                <h4><i class="fas fa-list"></i> 시드를 고르세요</h4>
                                <p class="description">시드를 직접 클릭하거나 화살표 키를 누르세요:</p>
                                <div id="possible-seeds-grid" class="possible-seeds-grid">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="map-container">
                        <canvas id="map-canvas" width="768" height="768"></canvas>
                        <div id="seed-image-container" style="display: none;"></div>
                        <div id="selection-overlay" class="selection-overlay">
                            <div class="overlay-message">
                                <i class="fas fa-map-marked-alt"></i>
                                <p>위에서 밤 보스 고르고 오셈</p>
                                <small>셋팅을 골라야 시작혀~</small>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div id="weakness-section" class="section" style="display: block;">
                <div class="weakness-card">
                    <h3><i class="fas fa-shield-alt"></i> 보스 약점 및 저항</h3>
                    <p class="description">이 표는 각 보스의 타격 종류와 속성에 대한 약점을 나타냅니다.</p>
                    <div class="table-container">
                        <table id="weakness-table" class="weakness-table">
                            <tr>
                                <th>보스</th>
                                <th>최대약점</th>
                                <th><img alt="The Standard Damage icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-standard-icon-2.jpg?width=690&quality=70&format=jpg&auto=webp" title="Standard"></th>
                                <th><img alt="The Slash Damage icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-slash-icon-2.jpg?width=690&quality=70&format=jpg&auto=webp" title="Slash"></th>
                                <th><img alt="The Strike Damage icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-strike-icon-2.jpg?width=690&quality=70&format=jpg&auto=webp" title="Strike"></th>
                                <th><img alt="The Pierce Damage icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-pierce-icon-2.jpg?width=690&quality=70&format=jpg&auto=webp" title="Pierce"></th>
                                <th><img alt="The Magic icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-magic-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Magic"></th>
                                <th><img alt="The Fire icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-fire-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Fire"></th>
                                <th><img alt="The Lightning icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-lightning-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Lightning"></th>
                                <th><img alt="The Holy icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-holy-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Holy"></th>
                                <th><img alt="The Bleed icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-bleed-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Bleed"></th>
                                <th><img alt="The Frostbite icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-frostbite-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Frostbite"></th>
                                <th><img alt="The Poison icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-poison-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Poison"></th>
                                <th><img alt="The Scarlet Rot icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-rot-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Scarlet Rot"></th>
                                <th><img alt="The Sleep icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-sleep-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Sleep"></th>
                                <th><img alt="The Madness icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-madness-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Madness"></th>
                            </tr>
                            <tr>
                                <td><strong>세멍뭉이</strong></td>
                                <td><img alt="The Holy icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-holy-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Holy"></td>
                                <td>+0%</td>
                                <td>+0%</td>
                                <td>+0%</td>
                                <td class="weak">+10%</td>
                                <td>+0%</td>
                                <td class="resistant">-50%</td>
                                <td>+0%</td>
                                <td class="weak">+35%</td>
                                <td>252</td>
                                <td class="resistant">541</td>
                                <td class="resistant">541</td>
                                <td>252</td>
                                <td class="weak">154</td>
                                <td class="resistant">-</td>
                            </tr>
                            <tr>
                                <td><strong>턱</strong></td>
                                <td><img alt="The Poison icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-poison-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Poison"></td>
                                <td>+0%</td>
                                <td>+0%</td>
                                <td>+0%</td>
                                <td>+0%</td>
                                <td>+0%</td>
                                <td class="resistant">-20%</td>
                                <td class="resistant">-50%</td>
                                <td>+0%</td>
                                <td class="resistant">541</td>
                                <td class="weak">154</td>
                                <td class="weak">154</td>
                                <td class="weak">154</td>
                                <td class="weak">154</td>
                                <td class="resistant">-</td>
                            </tr>
                            <tr>
                                <td><strong>두 벌레</strong> (나방)</td>
                                <td><img alt="The Fire icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-fire-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Fire"></td>
                                <td class="weak">+15%</td>
                                <td class="weak">+25%</td>
                                <td class="weak">+15%</td>
                                <td class="weak">+25%</td>
                                <td class="resistant">-50%</td>
                                <td class="weak">+40%</td>
                                <td class="resistant">-10%</td>
                                <td class="resistant">-10%</td>
                                <td class="weak">154</td>
                                <td class="resistant">541</td>
                                <td class="resistant">541</td>
                                <td class="weak">154</td>
                                <td class="weak">154</td>
                                <td class="resistant">-</td>
                            </tr>
                            <tr>
                                <td><strong>두 벌레</strong> (땅강아지)</td>
                                <td><img alt="The Fire icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-fire-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Fire"></td>
                                <td class="resistant">-10%</td>
                                <td class="resistant">-20%</td>
                                <td class="weak">+20%</td>
                                <td class="weak">+10%</td>
                                <td class="resistant">-10%</td>
                                <td class="weak">+35%</td>
                                <td class="resistant">-10%</td>
                                <td class="resistant">-10%</td>
                                <td class="weak">154</td>
                                <td class="weak">154</td>
                                <td>252</td>
                                <td class="weak">154</td>
                                <td class="weak">154</td>
                                <td class="resistant">-</td>
                            </tr>
                            <tr>
                                <td><strong>마리스핵노잼</strong></td>
                                <td><img alt="The Lightning icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-lightning-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Lightning"></td>
                                <td>+0%</td>
                                <td class="weak">+15%</td>
                                <td class="resistant">-20%</td>
                                <td class="resistant">-10%</td>
                                <td class="resistant">-20%</td>
                                <td class="resistant">-50%</td>
                                <td class="weak">+40%</td>
                                <td class="resistant">-15%</td>
                                <td class="resistant">-</td>
                                <td>252</td>
                                <td class="resistant">-</td>
                                <td>252</td>
                                <td class="resistant">-</td>
                                <td class="resistant">-</td>
                            </tr>
                            <tr>
                                <td><strong>리브라</strong></td>
                                <td><img alt="The Madness icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-madness-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Madness"></td>
                                <td>+0%</td>
                                <td class="weak">+10%</td>
                                <td>+0%</td>
                                <td>+0%</td>
                                <td class="resistant">-20%</td>
                                <td class="weak">+20%</td>
                                <td>+0%</td>
                                <td class="weak">+35%</td>
                                <td>252</td>
                                <td>252</td>
                                <td class="weak">154</td>
                                <td class="weak">154</td>
                                <td class="resistant">-</td>
                                <td class="weak">154</td>
                            </tr>
                            <tr>
                                <td><strong>풀고르</strong></td>
                                <td><img alt="The Lightning icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-lightning-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Lightning"></td>
                                <td>+0%</td>
                                <td>+0%</td>
                                <td>+0%</td>
                                <td>+0%</td>
                                <td>+0%</td>
                                <td>+0%</td>
                                <td class="weak">+20%</td>
                                <td class="resistant">-30%</td>
                                <td class="weak">154</td>
                                <td class="weak">154</td>
                                <td class="weak">154</td>
                                <td class="weak">154</td>
                                <td class="weak">154</td>
                                <td class="resistant">-</td>
                            </tr>
                            <tr>
                                <td><strong>칼리고</strong></td>
                                <td><img alt="The Fire icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-fire-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Fire"></td>
                                <td>+0%</td>
                                <td class="resistant">-15%</td>
                                <td class="weak">+15%</td>
                                <td class="resistant">-10%</td>
                                <td class="resistant">-20%</td>
                                <td class="weak">+35%</td>
                                <td class="resistant">-20%</td>
                                <td class="resistant">-20%</td>
                                <td>252</td>
                                <td class="resistant">541</td>
                                <td>252</td>
                                <td>252</td>
                                <td class="resistant">541</td>
                                <td class="resistant">-</td>
                            </tr>
                            <tr>
                                <td><strong>밤본자 1페</strong></td>
                                <td><img alt="The Holy icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-holy-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Holy"></td>
                                <td>+0%</td>
                                <td class="weak">+15%</td>
                                <td class="resistant">-10%</td>
                                <td class="weak">+10%</td>
                                <td>+0%</td>
                                <td class="weak">+20%</td>
                                <td>+0%</td>
                                <td class="weak">+35%</td>
                                <td class="resistant">-</td>
                                <td class="resistant">-</td>
                                <td class="resistant">-</td>
                                <td>252</td>
                                <td class="resistant">541</td>
                                <td class="resistant">-</td>
                            </tr>
                            <tr>
                                <td><strong>밤본자 2페</strong></td>
                                <td><img alt="The Holy icon in Elden Ring: Nightreign." class="damage-icon" src="https://assetsio.gnwcdn.com/elden-ring-nightreign-holy-icon.jpg?width=690&quality=70&format=jpg&auto=webp" title="Holy"></td>
                                <td>+0%</td>
                                <td class="resistant">-10%</td>
                                <td class="weak">+10%</td>
                                <td class="weak">+15%</td>
                                <td>+0%</td>
                                <td>+0%</td>
                                <td class="weak">+20%</td>
                                <td class="weak">+20%</td>
                                <td class="resistant">-</td>
                                <td class="resistant">-</td>
                                <td class="resistant">-</td>
                                <td>252</td>
                                <td class="resistant">541</td>
                                <td class="resistant">-</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-question-circle"></i> Help & Tips</h3>
                <button class="close-btn" id="close-help">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h4><i class="fas fa-gamepad"></i> How to Use This Tool</h4>
                    <p>This tool helps you identify your Nightreign map seed by comparing the locations of Churches and Sorcerer's Rises on your map.</p>
                    
                    <h4><i class="fas fa-list-ol"></i> Step by Step Guide</h4>
                    <ol>
                        <li>Select your <strong>Nightlord</strong> from the available options</li>
                        <li>Choose your <strong>Map/Shifting Earth</strong> type</li>
                        <li>Look at the highlighted orange dots on the map - these are potential POI locations</li>
                        <li>Click on the dots to mark what you see in your actual game:
                            <ul>
                                <li><strong>Left click</strong> = Church</li>
                                <li><strong>Right click</strong> = Choose Sorcerer's Rise or Other POI</li>
                            </ul>
                        </li>
                        <li>As you mark locations, the possible seeds will be filtered</li>
                        <li>When only one seed matches, you'll see the full seed details and map image</li>
                    </ol>

                    <h4><i class="fas fa-lightbulb"></i> Tips for Best Results</h4>
                    <ul>
                        <li>Mark as many POIs as you can see clearly in your game</li>
                        <li>Use right-click menu to select between Sorcerer's Rise, Village, or Other POI</li>
                        <li>If you get no results, try resetting and being more precise with your clicks</li>
                        <li>The seed image shows the exact layout for verification</li>
                        <li>Select both Nightlord and Map before marking POIs</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
      
    <!-- Context Menu for Right Click -->
    <div id="poi-context-menu" class="context-menu" style="display: none;">
        <div class="context-menu-item" data-type="mage">
            <img src="assets/images/mage-tower.png" style="width: 16px; height: 16px; margin-right: 8px; vertical-align: middle;">
            Sorcerer's Rise
        </div>
        <div class="context-menu-item" data-type="village">
            <img src="assets/images/village.png" style="width: 16px; height: 16px; margin-right: 8px; vertical-align: middle;">
            Village
        </div>
        <div class="context-menu-item" data-type="other">
            <i class="fas fa-question-circle"></i>
            Other POI
        </div>
    </div>

    <footer style="text-align: center; padding: 20px; color: #6c757d; font-size: 14px; border-top: 1px solid #e0e0e0; margin-top: 40px;">
        <p>
            <i class="fab fa-github"></i> 
            Open Source Project - 
            <a href="https://github.com/thanosapollo/nightreign-mapseed-recogniser" target="_blank" style="color: #007bff; text-decoration: none;">
                View Source Code on GitHub
            </a>
        </p>
    </footer>

    <script src="data.js"></script>
    <script src="script.js"></script>
</body>
</html>
